<div id="main">

  <span class="tb" [class.active]="!upload" (click)="upload=false">Images</span>
  <span class="tb" [class.active]="upload" (click)="upload=true">Upload New</span>

  <div id="sec">

    <div *ngIf="!upload && (images$ | async) as images">

      <input type="text" placeholder="Search">
      <article>
        <div *ngFor="let item of images" (click)="selected=item" [class.selected]="selected==item">
          <img [src]="item.url" width="200" height="200" loading="lazy">
        </div>
      </article>

      <footer>
        <button type="button" (click)="trigger.vc.detach(0)">Close</button>
        <button type="button" class="btn-primary" (click)="onSelectItem()">Update</button>
      </footer>
    </div>

    <form *ngIf="upload">
        <input #tag type="text" placeholder="Tag" required><br>
        <small>Tags will be used when searching for images</small>
        <label>
          <input type="file" #file accept="image/*" (change)="onSelectFiles($event, thumb)" required>
          <b>
            Choose or drag image here
          </b>
        </label>
        <img src="" width="150" #thumb>
     
      <footer>
        <button (click)="trigger.vc.detach(0)">Close</button>&nbsp;
        <button type="button" id="upload" class="btn-primary" (click)="onUpload(tag.value, file)">Upload</button>
      </footer>
     </form>

  </div>
</div>